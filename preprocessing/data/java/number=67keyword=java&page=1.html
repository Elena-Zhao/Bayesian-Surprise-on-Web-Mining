<!DOCTYPE html><!--html5--><!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]--><!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]--><head>	<meta http-equiv="X-UA-Compatible" content="IE=edge" />  	<meta charset="utf-8" />	<title>Arduino Playground - Java </title>	<link rel="shortcut icon" type="image/x-icon" href="http://playground.arduino.cc/favicon.png" />	<link rel="stylesheet" href="http://arduino.cc/fonts/fonts.css" type="text/css" />	<link rel="stylesheet" href="http://arduino.cc/css/arduino-icons.css">	<link rel="stylesheet" href="http://arduino.cc/css/animation.css"><!--[if IE 7]>	<link rel="stylesheet" href="http://arduino.cc/css/arduino-icons-ie7.css"><![endif]-->	<!--[if gte IE 9]><!-->	<link rel='stylesheet' href='http://arduino.cc/css/foundation2.css' type='text/css' />	<![endif]-->	<!--[if IE 8]>		<link rel='stylesheet' href='http://arduino.cc/css/foundation_ie8.css' type='text/css' />		<![endif]-->		<link rel='stylesheet' href='http://arduino.cc/css/arduino_code_highlight.css' type='text/css' />	<link rel="stylesheet" type="text/css" media="screen" href="http://arduino.cc/css/typeplate.css">	<link rel='stylesheet' href='http://playground.arduino.cc/pub/skins/arduinoWide_SSO/css/arduinoWide_SSO.css' type='text/css' />	<link rel='stylesheet' href='http://arduino.cc/css/common.css' type='text/css' />	  	<link href="https://plus.google.com/114839908922424087554" rel="publisher" />	<script src="http://arduino.cc/js/vendor/custom.modernizr.js"></script></head><body>	<div id="menuWings" class="fixed"></div>	<div id="page">		<script>	var userAgent = (navigator.userAgent || navigator.vendor || window.opera).toLowerCase();	if(userAgent.indexOf('mac')>0){		$("head").append('<style type="text/css">@-moz-document url-prefix() {h1 a, h2 a, h3 a, h4 a, h5 a, h1 a:hover, h2 a:hover, th a, th a:hover, h3 a:hover, h4 a:hover, h5 a:hover, #wikitext h2 a:hover, #wikitext h3 a:hover, #wikitext h4 a:hover {padding-bottom: 0.5em!important;} #pageheader .search input{font-family: "TyponineSans Regular 18";} #pagefooter .monospace{margin-top: -4px;} #navWrapper ul.left &gt; li{margin-top: -2px; padding-bottom: 2px;}#navWrapper ul.right &gt; li{margin-top: -5px; padding-bottom: 5px;}#navWrapper ul.right &gt; li ul{margin-top: 4px;} .slider-container .fixed-caption p{padding:8px 0 14px 0}}</style>');	}</script><!--[if IE]><link rel='stylesheet' href='https://id.arduino.cc//css/ie-monospace.css' type='text/css' /><![endif]--><div id="menuWings" class="fixed"></div><!--[if IE 8]><div class="alert-box panel ie8alert">  <p><strong>Arduino.cc offers limited compatibility for Internet Explorer 8. Get a modern browser as Chrome, Firefox or Safari.</strong></p>  <a href="" class="close">&times;</a></div><![endif]--><div id="pageheader">	<div class="row" class="contain-to-grid">		<div class="small-6 large-8 eight columns">			<div class="title"><a href="http://arduino.cc">Arduino</a></div>		</div>		<div class="small-6 large-4 four columns search">			<div class="row collapse">				<form method="GET" action="http://www.google.com/search">	<div class="small-12 twelve columns">		<i class="icon-search-2"></i>		<input type="hidden" name="ie" value="UTF-8">		<input type="hidden" name="oe" value="UTF-8">		<input type="text" name="q" size="25" maxlength="255" value="" placeholder="Search the Arduino Playground">		<input type="submit" name="btnG" VALUE="search">		<input type="hidden" name="domains" value="http://playground.arduino.cc">		<input type="hidden" name="sitesearch" value="http://playground.arduino.cc">	</div></form>			</div>		</div>	</div>	<!--[if gte IE 9]><!-->	<div id="navWrapper"  class="sticky">	<![endif]-->	<!--[if IE 8]>		<div id="navWrapper">	<![endif]-->		<nav class="top-bar"  data-options="is_hover:true" >			<ul class="title-area">				<li class="name"></li>			</ul>			<section class="top-bar-section">				<ul class="left">					<li id="navLogo">						<a href="http://arduino.cc">							<img src="http://arduino.cc/img/logo_46.png" alt="userpicture" />						</a>					</li>					<li id="navHome"><a href="http://arduino.cc">Home</a></li>					<li><a href="http://store.arduino.cc">Buy</a></li>					<li><a href="http://arduino.cc/en/Main/Software">Download</a></li>					<li class="has-dropdown"><a href="http://arduino.cc/en/Main/Products">Products</a>						<ul class="dropdown">							<li><a href="http://arduino.cc/en/Main/Products">Arduino</a></li>							<li><a href="http://arduino.cc/en/ArduinoAtHeart/Products">AtHeart</a></li>							<li><a href="http://arduino.cc/en/ArduinoCertified/Products">Certified</a></li>						</ul>					</li>					<li class="has-dropdown active"><a href="#">Learning</a>						<ul class="dropdown">							<li><a href="http://arduino.cc/en/Guide/HomePage">Getting started</a></li>							<li><a href="http://arduino.cc/en/Tutorial/HomePage">Examples</a></li>							<li><a href="http://arduino.cc/en/Reference/HomePage">Reference</a></li>							<li><a href="http://playground.arduino.cc">Playground</a></li>						</ul>					</li>					<li><a href="http://forum.arduino.cc">Forum</a></li>					<li class="has-dropdown"><a href="#">Support</a>						<ul class="dropdown">							<li><a href="http://arduino.cc/en/Main/FAQ">FAQ</a></li>							<li><a href="http://arduino.cc/en/ContactUs">Contact Us</a></li>						</ul>					</li>					<li><a href="http://blog.arduino.cc">Blog</a></li>				</ul>								<ul class="right">					<li><a href="https://id.arduino.cc/auth/login/?returnurl=http%3A%2F%2Fplayground.arduino.cc%2FInterfacing%2FJava" class="cart">LOG IN</a></li>					<li><a href="https://id.arduino.cc/auth/signup" class="cart">SIGN UP</a></li>				</ul>							</section>		</nav>	</div></div>		<br class="clear"/>		<!--PageLeftFmt-->		<div id="pagenav">			<p><em>The <a class='wikilink' href='http://playground.arduino.cc/Main/HomePage'>playground</a> is a publicly-editable wiki about <a class='urllink' href='http://www.arduino.cc/' rel='nofollow'>Arduino</a>.</em></p><p class='vspace'></p><p class='sidehead'><a class='wikilink' href='http://playground.arduino.cc/Main/ManualsAndCurriculum'>Manuals and Curriculum</a></p><p class='vspace'></p><p class='sidehead'><a class='urllink' href='http://arduino.stackexchange.com' rel='nofollow'>Arduino StackExchange</a></p><p class='vspace'></p><p class='sidehead'><a class='wikilink' href='http://playground.arduino.cc/Main/ArduinoCoreHardware'>Board Setup and Configuration</a></p><p class='vspace'></p><p class='sidehead'><a class='wikilink' href='http://playground.arduino.cc/Main/DevelopmentTools'>Development Tools</a></p><p class='vspace'></p><p class='sidehead'> <a class='wikilink' href='http://playground.arduino.cc/Main/ArduinoOnOtherAtmelChips'>Arduino on other Atmel Chips</a></p><p class='vspace'></p><p class='sidehead'><a class='wikilink' href='http://playground.arduino.cc/Main/InterfacingWithHardware'>Interfacing With Hardware</a></p><ul><li><a class='wikilink' href='http://playground.arduino.cc/Main/InterfacingWithHardware#Output'>Output</a></li><li><a class='wikilink' href='http://playground.arduino.cc/Main/InterfacingWithHardware#InputTOC'>Input</a></li><li><a class='wikilink' href='http://playground.arduino.cc/Main/InterfacingWithHardware#ui'>User Interface</a></li><li><a class='wikilink' href='http://playground.arduino.cc/Main/InterfacingWithHardware#Storage'>Storage</a></li><li><a class='wikilink' href='http://playground.arduino.cc/Main/InterfacingWithHardware#Communication'>Communication</a> </li><li><a class='wikilink' href='http://playground.arduino.cc/Main/IntWithHW-PwrSup'>Power supplies</a> </li><li><a class='wikilink' href='http://playground.arduino.cc/Main/InterfacingWithHardware#General'>General</a> </li></ul><p class='vspace'></p><p class='sidehead'><a class='wikilink' href='http://playground.arduino.cc/Main/InterfacingWithSoftware'>Interfacing with Software</a></p><p class='vspace'></p><p class='sidehead'><a class='wikilink' href='http://playground.arduino.cc/Main/GeneralCodeLibrary'>User Code Library</a></p><ul><li><a class='wikilink' href='http://playground.arduino.cc/Main/SketchList'>Snippets and Sketches</a></li><li><a class='wikilink' href='http://playground.arduino.cc/Main/LibraryList'>Libraries</a></li><li><a class='wikilink' href='http://playground.arduino.cc/Main/TutorialList'>Tutorials</a></li></ul><p class='vspace'></p><p class='sidehead'><a class='urllink' href='http://code.google.com/p/arduino/issues/list' rel='nofollow'>Suggestions &amp; Bugs</a></p><p class='vspace'></p><p class='sidehead'><a class='wikilink' href='http://playground.arduino.cc/Main/ElectroInfoResources'>Electronics Technique</a></p><p class='vspace'></p><p class='sidehead'><a class='wikilink' href='http://playground.arduino.cc/Main/Resources'>Sources for Electronic Parts</a></p><p class='vspace'></p><p class='sidehead'><a class='wikilink' href='http://playground.arduino.cc/Main/SimilarBoards'>Related Hardware and Initiatives</a></p><p class='vspace'></p><p class='sidehead'><a class='urllink' href='http://playground.arduino.cc/Main/People' rel='nofollow'>Arduino People/Groups &amp; Sites</a></p><p class='vspace'></p><p class='sidehead'><a class='urllink' href='http://playground.arduino.cc/Projects/ArduinoUsers' rel='nofollow'>Exhibition</a></p><p class='vspace'></p><p class='sidehead'><a class='urllink' href='http://playground.arduino.cc/Projects/Ideas' rel='nofollow'>Project Ideas</a></p><p class='vspace'></p><p class='sidehead'><a class='wikilink' href='http://playground.arduino.cc/Main/Languages'>Languages</a></p><p class='vspace'></p><hr /><p class='vspace'></p><p class='sidehead'> <a class='wikilink' href='http://playground.arduino.cc/Main/Participate'>PARTICIPATE</a></p><ul><li><a class='urllink' href='http://code.google.com/p/arduino/issues/list' rel='nofollow'>Suggestions</a></li><li><a class='wikilink' href='http://playground.arduino.cc/Main/Participate#contribrules'>Formatting guidelines</a></li><li><a class='wikilink' href='http://playground.arduino.cc/Site/AllRecentChanges'>All recent changes</a></li><li><a class='wikilink' href='http://playground.arduino.cc/PmWiki/PmWiki'>PmWiki</a></li><li><a class='wikilink' href='http://playground.arduino.cc/Main/WikiSandbox'>WikiSandBox training</a></li><li><a class='wikilink' href='http://playground.arduino.cc/PmWiki/BasicEditing'>Basic Editing</a></li><li><a class='urllink' href='http://www.pmwiki.org/wiki/Cookbook/CookbookBasics' rel='nofollow'>Cookbook (addons)</a></li><li><a class='urllink' href='http://www.pmwiki.org/wiki/PmWiki/DocumentationIndex' rel='nofollow'>Documentation index</a><p class='vspace'></p></li><li><a class='urllink' href='http://www.bartoloilliano.com/arduino-tutorial-costruire-un-drone-con-webcam-telecomandato-da-pc-tramite-csharp.html' rel='nofollow'>Drone with Arduino</a><p class='vspace'></p></li><li><a class='urllink' href='http://arduinothermostat.blogspot.co.uk' rel='nofollow'>Thermostat with Arduino</a></li></ul><p class='vspace'></p>		</div>		<!--/PageLeftFmt-->				<div id="pagetext" class="playground">				<!--PageText--><div id='wikitext'><h3>Arduino and Java</h3><p>See page history for list of all contributors.</p><p class='vspace'></p><h2>Overview</h2><p>The Arduino IDE itself is written in Java, and it can communicate to the serial port via the <a class='urllink' href='http://rxtx.qbang.org/' rel='nofollow'>RXTX Java library</a>. That library is very similar to the Java Communications API extension. Internally the IDE remembers which port and baud rate you used last time. Unfortunately that internal implementation can not be considered public API you can reliably use. So you will have to keep your own settings to remember which COM port your Arduino card is using.</p><p class='vspace'></p><p>This interface sample presumes that you already know how to compile and run Java code. There are plenty of other resources on the Internet to teach you to program in Java. Most serious Java programmers use a Java IDE to create Java programs, like the free Eclipse IDE, but this example provides information for the less frequent Java programmer.</p><p class='vspace'></p><h2>Arduino Board Set Up</h2><p>Before you begin interfacing with your Arduino board, you must have the Arduino IDE installed and configured. Once it is installed, try this simple sketch. You can use the Serial Monitor of the IDE to verify that the board is set up correctly.</p><p class='vspace'></p><pre> void setup(){  Serial.begin(9600);}void loop(){  Serial.println("Hello world");  delay(1000);}</pre><h3>RXTX Library Set Up</h3><p>If you installed the Arduino IDE, you already have the RXTX library installed for the next steps, and you may be able to skip this section and start with the sample Java code. If you installed a separate copy of the RXTX, you can do <strong>one</strong> of the following:</p><h4>Platform indepedent (not require for Linux with the new method)</h4><ul><li>When starting Java, use the -Djava.library.path= command line argument to state where the JNI libraries are located. For example, you could use <code>java -Djava.library.path=C:\rxtx-2.2pre2-bins\win32 <span class='wikiword'>SerialTest</span></code> You should also ensure that the <span class='wikiword'>RXTXcomm</span>.jar is in your CLASSPATH.</li></ul><h4>Windows 32-bit</h4><ul><li>Copy the <code>win32/rxtxSerial.dll</code> into <code>C:\Windows\System32</code></li><li>Append the directory containing <code>rxtxSerial.dll</code> into your <code>PATH</code> environment variable.</li></ul><h4>Windows 64-bit</h4><ul><li>Copy the <code>win64/rxtxSerial.dll</code> into <code>C:\Windows\<span class='wikiword'>SysWOW64</span></code></li><li>Append the directory containing <code>rxtxSerial.dll</code> into your <code>PATH</code> environment variable.</li></ul><h4>Linux</h4><ul><li>Download the last version of the rxtx java library at <a class='urllink' href='http://rxtx.qbang.org/wiki/index.php/Download' rel='nofollow'>http://rxtx.qbang.org/wiki/index.php/Download</a>.</li><li>Extract the package, open extracted files, go to Linux and choose the folder which correspond to your system configuration.</li><li>Copy all the files from the previous folder to /jre/lib/[machine type] (i386 for instance).</li><li>Copy <span class='wikiword'>RXTXcomm</span>.jar from the main folder to /jre/lib/ext.</li></ul><h4>Mac OS X</h4><ul><li>Copy <span class='wikiword'>RXTXcomm</span>.jar from the main folder to <code>/Library/Java/Extensions</code></li><li>Copy the <code>mac-10.5/librxtxSerial.jnilib</code> (or, if this version does not work for you, obtain a 64 bit compiled version from <a class='urllink' href='http://blog.iharder.net/2009/08/18/rxtx-java-6-and-librxtxserial-jnilib-on-intel-mac-os-x/' rel='nofollow'>http://blog.iharder.net/2009/08/18/rxtx-java-6-and-librxtxserial-jnilib-on-intel-mac-os-x/</a>) and paste into <code>/Library/Java/Extensions</code></li><li>Append the directory containing <code>librxtxSerial.jnilib</code> files into your DYLD_LIBRARY_PATH environment variable</li><li>See the other notes on Mac OS X below the sample java code.</li></ul><p class='vspace'></p><h2>Sample Java Code</h2><p>Now that you have confirmed that the board is working, you are now ready to save and compile the following sample code. You should save it as <span class='wikiword'>SerialTest</span>.java. You may need to modify the PORT_NAMES of this sample to use the correct COM port that you are using.</p><p class='vspace'></p><pre> import java.io.BufferedReader;import java.io.InputStreamReader;import java.io.OutputStream;import gnu.io.CommPortIdentifier; import gnu.io.SerialPort;import gnu.io.SerialPortEvent; import gnu.io.SerialPortEventListener; import java.util.Enumeration;public class SerialTest implements SerialPortEventListener {	SerialPort serialPort;        /** The port we're normally going to use. */	private static final String PORT_NAMES[] = { 			"/dev/tty.usbserial-A9007UX1", // Mac OS X                        "/dev/ttyACM0", // Raspberry Pi			"/dev/ttyUSB0", // Linux			"COM3", // Windows	};	/**	* A BufferedReader which will be fed by a InputStreamReader 	* converting the bytes into characters 	* making the displayed results codepage independent	*/	private BufferedReader input;	/** The output stream to the port */	private OutputStream output;	/** Milliseconds to block while waiting for port open */	private static final int TIME_OUT = 2000;	/** Default bits per second for COM port. */	private static final int DATA_RATE = 9600;	public void initialize() {                // the next line is for Raspberry Pi and                 // gets us into the while loop and was suggested here was suggested http://www.raspberrypi.org/phpBB3/viewtopic.php?f=81&amp;t=32186                System.setProperty("gnu.io.rxtx.SerialPorts", "/dev/ttyACM0");		CommPortIdentifier portId = null;		Enumeration portEnum = CommPortIdentifier.getPortIdentifiers();		//First, Find an instance of serial port as set in PORT_NAMES.		while (portEnum.hasMoreElements()) {			CommPortIdentifier currPortId = (CommPortIdentifier) portEnum.nextElement();			for (String portName : PORT_NAMES) {				if (currPortId.getName().equals(portName)) {					portId = currPortId;					break;				}			}		}		if (portId == null) {			System.out.println("Could not find COM port.");			return;		}		try {			// open serial port, and use class name for the appName.			serialPort = (SerialPort) portId.open(this.getClass().getName(),					TIME_OUT);			// set port parameters			serialPort.setSerialPortParams(DATA_RATE,					SerialPort.DATABITS_8,					SerialPort.STOPBITS_1,					SerialPort.PARITY_NONE);			// open the streams			input = new BufferedReader(new InputStreamReader(serialPort.getInputStream()));			output = serialPort.getOutputStream();			// add event listeners			serialPort.addEventListener(this);			serialPort.notifyOnDataAvailable(true);		} catch (Exception e) {			System.err.println(e.toString());		}	}	/**	 * This should be called when you stop using the port.	 * This will prevent port locking on platforms like Linux.	 */	public synchronized void close() {		if (serialPort != null) {			serialPort.removeEventListener();			serialPort.close();		}	}	/**	 * Handle an event on the serial port. Read the data and print it.	 */	public synchronized void serialEvent(SerialPortEvent oEvent) {		if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {			try {				String inputLine=input.readLine();				System.out.println(inputLine);			} catch (Exception e) {				System.err.println(e.toString());			}		}		// Ignore all the other eventTypes, but you should consider the other ones.	}	public static void main(String[] args) throws Exception {		SerialTest main = new SerialTest();		main.initialize();		Thread t=new Thread() {			public void run() {				//the following line will keep this app alive for 1000 seconds,				//waiting for events to occur and responding to them (printing incoming messages to console).				try {Thread.sleep(1000000);} catch (InterruptedException ie) {}			}		};		t.start();		System.out.println("Started");	}}</pre><p class='vspace'></p><p>There are other methods to get data over the serial port, like via polling, but this event based method has very low CPU overhead because the listener is only called when data is available.</p><p class='vspace'></p><h2>Alternatives</h2><h3>Ardulink</h3><p>Ardulink is a complete, open source, java solution for the control and coordination of Arduino boards. Communication protocol, java SWING components collection, Network Server and more. It uses RXTX library for serial communication and Java libusb / libusb-win32 wrapper to communicate with boards without serial interface.</p><p class='vspace'></p><p>Ardulink has a ready SWING console able to drive Arduino in minutes.</p><p class='vspace'></p><p>The main Adulink java class is the Link class. In order to communicate with Arduino you have to retrieve a Link instance.</p><pre>Link link = Link.getDefaultInstance();</pre><p>or for instance</p><pre>Link link = Link.createInstance("digisparkConnection", new DigisparkUSBConnection());</pre><p class='vspace'></p><p>Then the connection</p><pre>boolean connected = link.connect(comPort, baudRate); // comPort could be "COM19" for windows</pre><p class='vspace'></p><p>Then send messages</p><pre>link.sendPowerPinIntensity(pin, powerValue); // To PWM pins (analogWrite)link.sendPowerPinSwitch(pin, IProtocol.POWER_HIGH); // to digitalWritelink.sendCustomMessage("openDoor");link.sendCustomMessage("goAhead");</pre><p class='vspace'></p><p>or receive messages</p><pre>link.addDigitalReadChangeListener(new DigitalReadChangeListener() {	@Override	public void stateChanged(DigitalReadChangeEvent e) {		// do something	}	@Override	public int getPinListening() {		return 11;	}});link.addRawDataListener(new RawDataListener() {	@Override	public void parseInput(String id, int numBytes, int[] message) {		// do something	}});</pre><p class='vspace'></p><p>more info here: <a class='urllink' href='http://www.ardulink.org' rel='nofollow'>http://www.ardulink.org</a></p><h2>Use Sample Code</h2><h3>Windows</h3><p>For Windows you can create a batch file called run.bat in the same directory as the sample code mentioned above. This batch file can be used on your system, but you may need to modify the paths to match the install locations of your Java and Arduino IDE on your system.</p><p class='vspace'></p><pre> setlocalset PATH=%PATH%;C:\Program Files (x86)\arduino-0017\"C:\Program Files (x86)\Java\jdk1.6.0_12\bin\javac" -cp "C:\Program Files (x86)\arduino-0017\lib\RXTXcomm.jar" SerialTest.java"C:\Program Files (x86)\Java\jdk1.6.0_12\bin\java" -cp "C:\Program Files (x86)\arduino-0017\lib\RXTXcomm.jar;." SerialTest </pre><p class='vspace'></p><p>Basically, you will need to add the <span class='wikiword'>RXTXcomm</span>.jar to your class path, and you will need to add the associated JNI interface DLL (rxtxSerial.dll) to your PATH. For other platforms, you will need to add the same JNI shared library to your run time path.</p><p class='vspace'></p><p>When you run the run.bat file, you should see the same results as the Arduino IDE Serial Monitor. You can use Ctrl+Break to stop the program.</p><p class='vspace'></p><h3><span class='wikiword'>MacOSX</span></h3><p>Presuming that you are using the sample code above you may need to do the following steps.</p><p class='vspace'></p><p>1. Using the terminal, change to the directory containing the files to be compiled. Compile the file using (replace filename with your java class name):</p><pre> javac -classpath RXTXcomm.jar:. SerialTest.java </pre><p>If you placed the RXTX libraries into /Library/Java/Extensions, the file can be compiled by simply using:</p><pre> javac SerialTest.java</pre><p>2. Now it is time to run the compiled source code. This requires inclusion of the JNI shared library into the library path by using the command below:</p><pre> java -Djava.library.path=. -cp RXTXcomm.jar:. SerialTest</pre><p>If you placed the RXTX jar and library in the /Library/Java/Extensions folder rather than the directory that contains the ﬁle to be compiled, the ﬁle can be run without the library path as shown below: </p><pre> java SerialTest</pre><p>3. The code should now run successfully and print the serial output to the screen (as with the Arduino serial monitor)</p><p class='vspace'></p><h3>Mac OS X Architecture Matching Problems</h3><p>If you get an error message telling you the library is not matching architecture it might be due to <span class='wikiword'>MacOSX</span> Snow Leopard trying to execute the program in 64bit mode. If you run into this problem try the VM argument -d32 to force the java program to be executed in 32bit mode.</p><p class='vspace'></p><h3>Mac OS X locking</h3><p>If you encounter any issues with the port being unable to be locked, these instructions may help. If you set up the Arduino environment, this should not be an issue. This also does not seem to be an issue with RXTX version 2.2.</p><p class='vspace'></p><p>1. The RXTX library places its lock ﬁles in the folder /var/lock - which sometimes does not exist. Open terminal and Create the lock directory (as root) by using the following command: </p><pre> sudo mkdir /var/lock</pre><p>And enter your root password when prompted. </p><p class='vspace'></p><p>2. The appropriate permissions need to be applied to the /var/lock directory to allow the program to be run without being root. It is necessary to make sure you're in the group uucp and make sure the directory has group write permissions to uucp. Replace ‘username’ with your proﬁle user name.</p><pre> sudo dscl . -append /groups/_uucp GroupMembership username sudo chgrp uucp /var/lock sudo chmod 775 /var/lock </pre><p class='vspace'></p><p>A port in use exception (gnu.<span class='wikiword'>io.PortInUseException</span>) with version 2.1-7 might also be solved by changing permissions using the sh script from jlog: <a class='urllink' href='http://jlog.org/rxtx-mac.html' rel='nofollow'>http://jlog.org/rxtx-mac.html</a></p><p class='vspace'></p><h3>Linux</h3><ul><li>You must have follow the steps in the Linux part before.</li><li>To compile just lunch "javac <span class='wikiword'>SerialTest</span>.java".</li><li>Then type "java <span class='wikiword'>SerialTest</span>" and it should work.</li></ul><p class='vspace'></p><h2>Transmitting data to the arduino from the computer.</h2><p>In my experience, it seems that the Serial connection must be connected somewhere above 1 second (I have 1.5 seconds in my program) before a transmission can be made. It seems that for at least the atmega168 and diecimila, doing so ensures your transmission actually is transmitted. For doing that, Thread.sleep(delay) is used and delay is specified in milliseconds so I would use Thread.sleep(1500) after the Serial port is established. It seems this might be due to the program resetting when a serial connection is made, and the program has a necessary setup time.</p><p class='vspace'></p><p>The <span class='wikiword'>OutputStream</span> comes with 3 different write methods to send data from the computer to the Arduino. In the above example, you could use output.write(String) to send data, as in output.write("Hello Arduino!"). There's also one that'll send an integer value and another that will transmit an array of Bytes.</p><p class='vspace'></p><p>I found on the arduino's program, to accurately receive the data instead of receiving non-intelligible "255" data points, I had to maintain a generous delay between the Serial.read() commands. I ended up using 20 ms for safe measure, but the actual necessary number is likely much lower and one could use a "255 filter" to extract meaningful data, assuming none of your meaningful data consists of the number 255.</p><p class='vspace'></p><p>The simple Serial.read() function will process a byte at a time, although there are more interesting read functions available.</p><p class='vspace'></p><h2>Proper Port Handling</h2><p>If you want to properly close the port, you should call the close() method on the serial port object upon program exit. This will prevent the port from being locked after your program exits. You may notice this issue on Linux and not Windows. The serial port's close method should be called from a method that is synchronized with the serialEvent method, which will prevent any exceptions from appearing during program shutdown.</p></div>				<!-- AddThis Button Style BEGIN --><style>  .addthis_toolbox {    margin: 2em 0 1em;  }  .addthis_toolbox img {    float: left;    height: 25px;    margin-right: 10px;    width: auto;  }  .addthis_toolbox .social-container {    float: left;    height: 27px;     width: auto;   }  .addthis_toolbox .social-container .social-content {    float: left;    margin-top: 2px;    max-width: 0;    overflow: hidden;    -moz-transition: max-width .3s ease-out;    -webkit-transition: max-width .3s ease-out;    -o-transition: max-width .3s ease-out;    transition: max-width .3s ease-out;  }  .addthis_toolbox .social-container:hover .social-content {    max-width: 100px;    -moz-transition: max-width .2s ease-in;    -webkit-transition: max-width .2s ease-in;    -o-transition: max-width .2s ease-in;    transition: max-width .2s ease-in;  }  .addthis_toolbox .social-container .social-content a {    float: left;    margin-right: 5px;  }  .addthis_toolbox h3 {    font-size: 24px;    text-align: left;  }</style><!-- AddThis Button Style END --><!-- AddThis Button BEGIN --><div class="addthis_toolbox addthis_default_style">  <h3>Share</h3>  <!-- FACEBOOK -->  <div class="social-container">    <img src="/pub/skins/arduinoWide_SSO/img/facebook.png" />    <div class="social-content">      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>    </div>  </div>  <!-- TWITTER -->  <div class="social-container">    <img src="/pub/skins/arduinoWide_SSO/img/twitter.png">    <div class="social-content">      <a class="addthis_button_tweet"></a>    </div>  </div>  <!-- PINTEREST -->  <div class="social-container">    <img src="/pub/skins/arduinoWide_SSO/img/pinterest.png">    <div class="social-content">      <a class="addthis_button_pinterest_pinit" pi:pinit:url="http://www.addthis.com/features/pinterest" pi:pinit:media="http://www.addthis.com/cms-content/images/features/pinterest-lg.png"></a>    </div>  </div>  <!-- G+ -->  <div class="social-container">    <img src="/pub/skins/arduinoWide_SSO/img/gplus.png">    <div class="social-content">      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>    </div>  </div>  <script type="text/javascript">var addthis_config = {"data_track_addressbar":false};</script>  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-50573fab238b0d34"></script></div><!-- AddThis Button END -->			</div> <!-- eof pagetext -->				</div> <!-- eof page -->			<!--PageFooterFmt-->	<div id="pagefooter">		<div id="pagefooter" class="pagefooter">  <div class="row">    <div class="large-8 eight columns">      <div class="large-4 four columns newsletter-box">        <!-- Begin MailChimp Signup Form -->        <h6>Newsletter</h6>        <form action="http://arduino.us5.list-manage.com/subscribe/post?u=0140d17584d1c002bcd94d0e8&amp;id=69a7d1abe4" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>          <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Enter your email to sign up" required>          <i class="icon-right-small"></i>          <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="newsletter-button">        </form>        <!--End mc_embed_signup-->      </div>      <div class="clearfix"></div>      <ul class="inline-list">        <li class="monospace">&copy;2014 Arduino</li>        <li><a href="http://arduino.cc/en/Main/CopyrightNotice">Copyright Notice</a></li>        <li><a href='http://arduino.cc/en/Main/ContactUs'>Contact us</a></li>      </ul>    </div>    <div class="large-4 four columns">      <ul id="arduinoSocialLinks" class="arduino-social-links">        <li>          <a href="https://twitter.com/arduino">            <img src="http://arduino.cc/img/twitter.png" />          </a>        </li>        <li>          <a href="http://www.facebook.com/official.arduino">            <img src="http://arduino.cc/img/facebook.png" />          </a>        </li>        <li>          <a href="https://plus.google.com/+Arduino">            <img src="http://arduino.cc/img/gplus.png" />          </a>        </li>        <li>          <a href="http://www.flickr.com/photos/arduino_cc">            <img src="http://arduino.cc/img/flickr.png" />          </a>        </li>        <li>          <a href="http://youtube.com/arduinoteam">            <img src="http://arduino.cc/img/youtube.png" />          </a>        </li>      </ul>    </div>  </div></div>	</div>	<!--/PageFooterFmt-->				<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>	<!--[if gte IE 9]><!-->	<script src="http://arduino.cc/js/foundation.min.js"></script>	<script src="http://arduino.cc/js/foundation.topbar.custom.js"></script>	<script>	  $(document).foundation();	</script>	<!--<![endif]-->	<!--[if IE 8]>	<script src="http://arduino.cc/js/foundation_ie8.min.js"></script>	<script src="http://arduino.cc/js/ie8/jquery.foundation.alerts.js"></script>	<script src="http://arduino.cc/js/app.js"></script>	<![endif]-->		<script type="text/javascript">	  var _gaq = _gaq || [];	  _gaq.push(['_setAccount', 'UA-22581631-3']);	  _gaq.push(['_setDomainName', 'arduino.cc']);	  _gaq.push(['_trackPageview']);		    (function() {	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);	  })();	</script></body></html>